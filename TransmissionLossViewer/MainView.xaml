<Window x:Class="TransmissionLossViewer.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:View="clr-namespace:ESME.Views.TransmissionLossViewer;assembly=ESME.Views"
        xmlns:mef="clr-namespace:MEFedMVVM.ViewModelLocator;assembly=MEFedMVVM.WPF"
        xmlns:cinch="clr-namespace:Cinch;assembly=Cinch.WPF"
        mef:ViewModelLocator.ViewModel="TransmissionLossViewerMainViewModel"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:Properties="clr-namespace:TransmissionLossViewer.Properties" 
        xmlns:TransmissionLoss="clr-namespace:ESME.Views.TransmissionLoss;assembly=ESME.Views" 
        Icon="gnome_sound_recorder.ico"
        Top="{Binding Source={x:Static Properties:Settings.Default}, Path=WindowTop, Mode=TwoWay}"
        Left="{Binding Source={x:Static Properties:Settings.Default}, Path=WindowLeft, Mode=TwoWay}"
        Height="{Binding Source={x:Static Properties:Settings.Default}, Path=WindowHeight, Mode=TwoWay}"
        Width="{Binding Source={x:Static Properties:Settings.Default}, Path=WindowWidth, Mode=TwoWay}"
        Title="{Binding TitleString, Mode=TwoWay}">
	<Window.InputBindings>
		<KeyBinding Command="{Binding SaveAsCommand}"
		            Key="S"
		            Modifiers="Control" />
		<KeyBinding Command="{Binding ExportAsCommand}"
		            Key="E"
		            Modifiers="Control" />		
	</Window.InputBindings>
	<i:Interaction.Triggers>
		<i:EventTrigger EventName="Closing">
			<cinch:EventToCommandTrigger Command="{Binding ViewClosingCommand}" />
		</i:EventTrigger>        
    </i:Interaction.Triggers>   
    <DockPanel LastChildFill="True">

		<Menu Name="TransmissionLossViewFileMenu"
		      DockPanel.Dock="Top"
		      HorizontalAlignment="Stretch"
		      BorderBrush="Black"
		      BorderThickness="1">
			<MenuItem Header="_File">				
				<MenuItem Header="Save As"
				          Command="{Binding SaveAsCommand}"
				          InputGestureText="Ctrl+S" />
				<MenuItem Header="Export to CSV"
				          Command="{Binding ExportAsCommand}"
				          InputGestureText="Ctrl+E" />                
				<MenuItem Header="Exit"
				          Command="{Binding CloseWindowCommand}"
				          InputGestureText="Ctrl+W" />
			</MenuItem>			
		</Menu>
        <StackPanel Orientation="Vertical">
            <ListBox ItemsSource="{Binding Database.Scenarios}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedScenario}"/>
            <ListBox ItemsSource="{Binding AnalysisPoints}" DisplayMemberPath="Geo" SelectedItem="{Binding SelectedAnalysisPoint}"/>
            <ListBox ItemsSource="{Binding AnalysisPointModes}" DisplayMemberPath="Item1" SelectedItem="{Binding SelectedMode}" />            
        </StackPanel>        
        <DockPanel DockPanel.Dock="Bottom">
            <StackPanel Orientation="Vertical">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Grid.Row="0" Grid.Column="0">
            <Run Text="Selected radial bearing: " />
            <Run Text="{Binding SelectedRadial.Bearing, StringFormat={}{0:000.0}}" />
            <Run Text="deg" />
                    </TextBlock>
                    <Path Stroke="DarkGray" Fill="Transparent" Grid.Row="0" Grid.Column="1" Height="17" Width="17" Margin="20 2"
                Data="{Binding SelectedBearingGeometry}" />
                </StackPanel>
                <Slider AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0" Grid.Row="1" Grid.Column="0"
                Grid.ColumnSpan="2" TickPlacement="BottomRight" Minimum="1" Maximum="{Binding RadialCount, Mode=TwoWay}"
                Value="{Binding SelectedRadialIndex}" Margin="5" />
            </StackPanel>
        </DockPanel>
        <View:TransmissionLossRadialView/>

	</DockPanel>
</Window>